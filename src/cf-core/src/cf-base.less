/* ==========================================================================
   Capital Framework
   Base styles
   ========================================================================== */

//
// Webfonts
//

@webfont-regular: Arial;
@webfont-italic:  Arial;
@webfont-medium:  Arial;
@webfont-demi:    Arial;

.u-webfont-regular() {
    font-family: @webfont-regular, Arial, sans-serif;
    font-style: normal;
    font-weight: normal;

    & em,
    & i {
        .u-webfont-italic();
    }

    & strong,
    & b {
        .u-webfont-demi();
    }
}

.u-webfont-italic() {
    font-family: @webfont-italic, Arial, sans-serif;
    font-style: italic;
    font-weight: normal;

    .lt-ie9 & {
        font-style: normal !important;
    }
}

.u-webfont-medium() {
    font-family: @webfont-medium, Arial, sans-serif;
    font-style: normal;
    font-weight: 500;

    .lt-ie9 & {
        font-weight: normal !important;
    }
}

.u-webfont-demi() {
    font-family: @webfont-demi, Arial, sans-serif;
    font-style: normal;
    font-weight: bold;

    .lt-ie9 & {
        font-weight: normal !important;
    }
}

// TODO: Deprecate these old mixin names once all of v4 is merged together.
.webfont-regular { .u-webfont-regular(); }
.webfont-italic  { .u-webfont-italic(); }
.webfont-medium  { .u-webfont-medium(); }
.webfont-demi    { .u-webfont-demi(); }

//
// Type hierarchy
//

body {
    .u-webfont-regular();

    color: @text;
    font-size: unit( @base-font-size-px / 16 * 100, % );
    line-height: @base-line-height;
}

.heading-1( @fs: @size-i ) {
    @font-size: @fs;
    .u-webfont-regular();

    margin-bottom: unit( 15px / @font-size, em );
    font-size: unit( @font-size / @base-font-size-px, em );
    line-height: 1.25;
}

.heading-2( @fs: @size-ii ) {
    @font-size: @fs;
    .u-webfont-regular();

    margin-bottom: unit( 15px / @font-size, em );
    font-size: unit( @font-size / @base-font-size-px, em );
    line-height: 1.25;
}

.heading-3( @fs: @size-iii )  {
    @font-size: @fs;
    .u-webfont-regular();

    margin-bottom: unit( 15px / @font-size, em );
    font-size: unit( @font-size / @base-font-size-px, em );
    line-height: 1.25;
}

.heading-4( @fs: @size-iv )  {
    @font-size: @fs;
    .u-webfont-medium();

    margin-bottom: unit( 15px / @font-size, em );
    font-size: unit( @font-size / @base-font-size-px, em );
    line-height: 1.25;
}

.heading-5( @fs: @size-v )  {
    @font-size: @fs;
    .u-webfont-demi();

    margin-bottom: unit( 15px / @font-size, em );
    font-size: unit( @font-size / @base-font-size-px, em );
    letter-spacing: 1px;
    line-height: 1.25;
    text-transform: uppercase;
}

.heading-6( @fs: @size-vi )  {
    @font-size: @fs;
    .u-webfont-demi();

    margin-bottom: unit( 15px / @font-size, em );
    font-size: unit( @font-size / @base-font-size-px, em );
    letter-spacing: 1px;
    line-height: 1.25;
    text-transform: uppercase;
}

// Resetting default browser styling for margin-top on headings
h1,
h2,
h3,
h4,
h5,
h6 {
    margin-top: 0;
}

h1,
.h1 {
    .heading-1();

    p + &,
    ul + &,
    ol + &,
    dl + &,
    figure + &,
    img + &,
    table + &,
    blockquote + & {
        margin-top: unit( 60px / @font-size, em );
    }

    .respond-to-max( @bp-xs-max, {
        .heading-2();

        p + &,
        ul + &,
        ol + &,
        dl + &,
        figure + &,
        img + &,
        table + &,
        blockquote + & {
            margin-top: unit( 45px / @font-size, em );
        }

        h2 + &,
        .h2 + &,
        h3 + &,
        .h3 + &,
        h4 + &,
        .h4 + &,
        h5 + &,
        .h5 + &,
        h6 + &,
        .h6 + & {
            margin-top: unit( 30px / @font-size, em );
        }
    } );
}

h2,
.h2 {
    .heading-2();

    p + &,
    ul + &,
    ol + &,
    dl + &,
    figure + &,
    img + &,
    table + &,
    blockquote + & {
        margin-top: unit( 45px / @font-size, em );
    }

    h1 + &,
    .h1 + &,
    h3 + &,
    .h3 + &,
    h4 + &,
    .h4 + &,
    h5 + &,
    .h5 + &,
    h6 + &,
    .h6 + & {
        margin-top: unit( 30px / @font-size, em );
    }

    .respond-to-max( @bp-xs-max, {
        .heading-3();

        p + &,
        ul + &,
        ol + &,
        dl + &,
        figure + &,
        img + &,
        table + &,
        blockquote + & {
            margin-top: unit( 30px / @font-size, em );
        }
    } );
}

h3,
.h3 {
    .heading-3();

    p + &,
    ul + &,
    ol + &,
    dl + &,
    figure + &,
    img + &,
    table + &,
    blockquote + &,
    h1 + &,
    .h1 + &,
    h2 + &,
    .h2 + &,
    h4 + &,
    .h4 + &,
    h5 + &,
    .h5 + &,
    h6 + &,
    .h6 + & {
        margin-top: unit( 30px / @font-size, em );
    }

    .respond-to-max( @bp-xs-max, {
        .heading-4();
    } );
}

h4,
.h4 {
    .heading-4();

    p + &,
    ul + &,
    ol + &,
    dl + &,
    figure + &,
    img + &,
    table + &,
    blockquote + &,
    h1 + &,
    .h1 + &,
    h2 + &,
    .h2 + &,
    h3 + &,
    .h3 + &,
    h5 + &,
    .h5 + &,
    h6 + &,
    .h6 + & {
        margin-top: unit( 30px / @font-size, em );
    }
}

h5,
.h5 {
    .heading-5();

    p + &,
    ul + &,
    ol + &,
    dl + &,
    figure + &,
    img + &,
    table + &,
    blockquote + &,
    h1 + &,
    .h1 + &,
    h2 + &,
    .h2 + &,
    h3 + &,
    .h3 + &,
    h4 + &,
    .h4 + &,
    h6 + &,
    .h6 + & {
        margin-top: unit( 30px / @font-size, em );
    }
}

h6,
.h6 {
    .heading-6();

    p + &,
    ul + &,
    ol + &,
    dl + &,
    figure + &,
    img + &,
    table + &,
    blockquote + &,
    h1 + &,
    .h1 + &,
    h2 + &,
    .h2 + &,
    h3 + &,
    .h3 + &,
    h4 + &,
    .h4 + &,
    h5 + &,
    .h5 + & {
        margin-top: unit( 30px / @font-size, em );
    }
}

.lead-paragraph {
    .heading-3();

    margin-top: unit( 30px / @font-size, em );
    margin-bottom: unit( 15px / 18px, em );

    .respond-to-max(@bp-xs-max, {
        // Use the same regular weight but reduce the sizes to h4 size
        margin-top: unit( 30px / 18px, em );
        font-size: unit( 18px / @base-font-size-px, em );
    });
}

.superheading {
    // For when you want a heading that's bigger than a normal H1
    @font-size: @size-xl;
    .u-webfont-regular();

    margin-bottom: unit( 20px / @font-size, em );
    font-size: unit( @font-size / @base-font-size-px, em );
    line-height: 1.25;
}

//
// Body copy element vertical margins
//

p,
ul,
ol,
dl,
figure,
table,
blockquote {
    margin-top: 0;
    margin-bottom: unit( 15px / @base-font-size-px, em );
}

p + ul,
p + ol {
    margin-top: unit( -5px / @base-font-size-px, em );
}

li {
    margin-bottom: unit( 8px / @base-font-size-px, em );

    &:last-child,
    nav & {
        margin-bottom: 0;
    }
}

//
// Default link
//

a {
    border-width: 0;
    border-style: dotted;
    border-color: @link-underline;
    color: @link-text;
    text-decoration: none;

    // Note: The class definitions below are only for use in
    // demonstrating link states. Do not use in production.

    &:visited,
    &.visited {
        border-color: @link-underline-visited;
        color: @link-text-visited;
    }

    &:hover,
    &.hover {
        border-style: solid;
        border-color: @link-underline-hover;
        color: @link-text-hover;
    }

    &:focus,
    &.focus {
        border-style: solid;
        outline: thin dotted;
    }

    &:active,
    &.active {
        border-style: solid;
        border-color: @link-underline-active;
        color: @link-text-active;
    }
}

//
// Underlined links
//

p,
li,
dd {
    // Restrict bottom borders to inline text links ...

    a {
        border-bottom-width: 1px;
    }
}

nav a {
    // ... unless they're part of a nav list
    border-bottom-width: 0;
}

//
// Lists
//

ul {
    // 32px provides exactly 15px between left margin
    // and bullet character in most browsers
    padding-left: unit( 32px / @base-font-size-px, em );
    list-style: square;
}

// Use the same overall number as ULs, but pull the number 1px to the left
ol {
    padding-left: unit( 31px / @base-font-size-px, em );

    > li {
        padding-left: unit( 1px / @base-font-size-px, em );
    }
}

//
// Tables
//

th,
td {
    padding: unit( 10px / @base-font-size-px, em );

    thead & {
        .h5();

        padding: unit( 10px / @font-size, em );
        background: @thead-bg;
        color: @thead-text;
    }
}

thead,
tbody tr {
    border-bottom: 1px solid @table-border;
}

th {
    .u-webfont-demi();

    text-align: left;
}

//
// Block quote
//

blockquote {
    margin-right: unit( 15px / @base-font-size-px, em );
    margin-left: unit( 15px / @base-font-size-px, em );

    .respond-to-min( @bp-sm-min, {
        margin-right: unit( 30px / @base-font-size-px, em );
        margin-left: unit( 30px / @base-font-size-px, em );
    } );
}

//
// Form labels
//

label {
    display: block;
    // 5px is eyeballed to 10px when considering line height.
    margin-bottom: unit( 5px / @base-font-size-px, em );
}

//
// Form elements
//

input[type="text"],
input[type="search"],
input[type="email"],
input[type="url"],
input[type="tel"],
input[type="number"],
textarea,
select[multiple] {
    @font-size: 16px;

    display: inline-block;
    padding: unit( 6 / @base-font-size-px, em );
    border: 1px solid @input-border;
    border-radius: 0;
    margin: 0;
    background: @input-bg;
    font-family: Arial, sans-serif;
    font-size: unit( @font-size / @base-font-size-px, em );
    vertical-align: top;
    -webkit-appearance: none;
    -webkit-user-modify: read-write-plaintext-only;
}

// Overrides extra left padding.
// http://stackoverflow.com/questions/11127891/how-can-i-get-rid-of-horizontal-padding-or-indent-in-html5-search-inputs-in-webk
::-webkit-search-decoration {
    -webkit-appearance: none;
}

// The .focus class is only included for documentation demos and should not
// be used in production.
input[type="text"]:focus,
input[type="text"].focus,
input[type="search"]:focus,
input[type="search"].focus,
input[type="email"]:focus,
input[type="email"].focus,
input[type="url"]:focus,
input[type="url"].focus,
input[type="tel"]:focus,
input[type="tel"].focus,
input[type="number"]:focus,
input[type="number"].focus,
textarea:focus,
textarea.focus,
select[multiple]:focus,
select[multiple].focus {
    border: 1px solid @input-border-focus;
    outline: 1px solid @input-border-focus;
    outline-offset: 0;
    box-shadow: none;
}

::-webkit-input-placeholder {
    color: @input-placeholder;
}
::-moz-placeholder {
    color: @input-placeholder;
}
:-ms-input-placeholder {
    color: @input-placeholder;
}

input[type="radio"],
input[type="checkbox"] {
    margin-top: unit( 4px / @base-font-size-px, em );
    margin-right: unit( 7px / @base-font-size-px, em );
    float: left;
}

//
// Images
//

img {
    max-width: 100%;
}

//
// Figure
//

figure {
    // reset browser default side margins
    margin-right: 0;
    margin-left: 0;

    img {
        // Removes weird vertical spacing below images.
        // TODO: Discuss whether this could just be universally applied to img
        vertical-align: middle;
    }
}

//
// EOF
//
